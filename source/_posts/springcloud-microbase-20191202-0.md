---
title: SpringCloud学习笔记——微服务基础知识
date: 2019-12-02 23:37:42
tags:
categories:
- SpringCloud
---

# 基础知识

## 微服务架构
简单来说微服务架构就是把一个原本整合在一起的系统拆分成多个系统。微，代表了每个系统拆分的体积都不是很大，便于后期的维护和管理。服务，代表了系统拆分后的职责是对外提供服务，无论是业务功能或者是数据支持等等，是一种对外，面向其他系统的设计。由于拆分成了不同的项目，每个项目都可以存在自己的架构、体系、数据存储、自动化测试等等，各个服务之间没有耦合使得每个单体的自由度非常高，甚至可以使用不同的语言来编写。

## 为什么要做微服务
其实就算你的公司里没有使用Spring Cloud之类的微服务框架，但是只要存在系统拆分之后相互调用的关系，其实也就可以说是一种微服务架构，为什么要使用微服务架构其实答案很简单，现在的互联网行业发展迅速竞争激烈，基本上各种app，活动都是几天一变，反映到我们开发人员的身上基本就是各种需求变更，快速迭代。如果你们的系统是一整个完整的单体系统的话，那么显然随着业务发展和公司壮大，这个系统将会越来越大，越来越复杂，维护成本越来越高甚至于到最后没有人敢维护，而且这么大的项目，编译打包一次都需要很长时间吧？而拆分了微服务之后每个团队各司其职，需求来了之后各自开发再对接接口即可，出了问题可以快速定位到是哪个服务哪个接口甚至哪个人身上，省时省力而且系统架构更加清晰。而且各个服务之间的侧重点不同，甚至可以结合自己系统的特点选择做适当的技术选型，灵活又方便。

## 微服务带来的挑战
* 运维成本增加
既然拆分了服务，那么对应的部署的服务肯定会大量增加，对于运维人员来说工作量和工作难度应该都会有所增加。
* 接口的质量
虽然拆分了服务，但是毕竟服务永远是服务于业务的，那么各个系统之间肯定还会存在业务依赖，只不过不再是单体服务中代码互相调用，而是系统间通信调用，所以接口的质量和管理就显得更加重要了
* 分布式的复杂性
一提起分布式显然大家都明白，很多情况会变得复杂起来，包括写代码的过程中可能要引入分布式事务，异步消息等等，而分布式之间可能还存在网络、环境等各种问题，对于开发和运维人员排查问题都是挑战。

## 微服务的实施要点
### 组件化
每个服务都应该被拆分后看作是整个公司系统运转的组件，大家各司其职又团结合作，相互之间既有依赖也有独立，每个组件独立部署、维护、升级，不影响其他组件
### 按业务区分
一般来讲微服务会以业务区分，过往的体系中也许我们只需要从技术角度区分人员团队，例如DBA团队，运维团队，后端团队，前端团队，但是微服务中，我们大可以打破这种界限，直接根据业务去进行划分，而业务中可以是全栈式的，从前端到DBA甚至到产品，应有尽有。
### 去中心化治理
当一个项目是集中化管理的话，那么很有可能存在一套统一的标准体系，但是毕竟所有事物都是在进步和改变的，当初设计的标准对于某些方面来说可能已经拖了后腿，但对于某些方面来说又是金科玉律，尤其是各种技术几乎都有自己擅长和不擅长的事情，完美的编程语言或者技术目前来说是不存在的，所以造成了业务和技术不匹配，但是如果采用了微服务治理可以有效地做到去中心化治理，各个服务自己扬长避短。
### 容错
一个单体应用的话可能由于某个模块的崩溃导致整个系统同时也不可用，而微服务很可能存在某个服务出现了问题，但是其他服务用的好好的，这看似是个优点，但是如果某个业务由于崩溃，导致其接口全部超时，其他项目调用接口时会阻塞等待，那时间长了甚至有可能由此引起其他项目的崩溃，原因恰恰是使用了微服务导致服务下线没有第一时间被相关人员注意到。

## Spring Cloud
Spring Cloud可以说是微服务领域的佼佼者，虽然不是最早的微服务框架，但是可以说是目前最完善并且最流行的。Spring Cloud是基于SpringBoot实现的微服务架构开发工具，整套微服务架构中包括了配置中心，注册中心，服务治理，网关，负载均衡，断流器，智能路由，全局锁，集群决策，分布式会话等等一系列的工作，对于中小型企业来说，可能没有足够的人力和能力去研发自己的微服务架构，那么Spring Cloud绝对是不二之选。

## 学习资料
网上有很多优秀的视频和学习资料，我这次选择的是**翟永超老师所写的《Spring Cloud 微服务实战》**，除了个别章节和例子的细节外，基本沿用了翟老师的思路，这本书也确实是SpringCloud实战的一款佳作，既有详细的例子，也有深度的源码解析，我在这里也是借他人所写，总结归纳，待日后回看，希望能有更多收获